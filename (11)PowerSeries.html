<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Power Series</title>
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
  <style>
    @font-face {
      font-family: 'TangoSans_Bold';
      src: url('tangosans/TangoSans_Bold.ttf') format('truetype');
    }
    body {
      background-color: #000;
      color: #00ccff;
      font-family: 'TangoSans_Bold', sans-serif;
      text-align: center;
      padding: 2em;
    }
    .box {
  display: flex;
  flex-direction: column;
  width: 200px;
  margin: 0 auto;
  align-items: center;
  border: 2px solid #00ccff;
  border-radius: 10px;
  padding: 1.5em;
  background-color: #111;
  box-shadow: 0 0 12px #00ccff55;
}


      .question {
        display: flex;
        align-items: center;
        gap: 0.5em;
      }


            input[type="text"] {
        background-color: #111;
        /* dark input background */
        color: #00ccff;
        /* cyan text color */
        border: 1px solid #00ccff;
        /* cyan border */
        border-radius: 4px;
        /* rounded corners */
        padding: 10px 12px;
        font-size: 16px;
        width: 20%;
        height: 3px;
        box-shadow: 0 0 8px #00ccff33;
        /* subtle cyan glow */
        outline: none;
        transition: box-shadow 0.3s ease, border-color 0.3s ease;
      }

      input[type="text"]:focus {
        border-color: #33ffff;
        box-shadow: 0 0 12px #33ffff;
      }

       button {
      margin-top: 1em;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: bold;
      color: #000;
      background-color: #00ccff;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
      animation: fadeIn 1s forwards;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #00ccff;
      /* animation: fadeIn 1s forwards; */
    }

    button:active {
      transform: scale(0.95);
      /* animation: fadeIn 1s forwards; */
    }

    
      
  </style>
</head>
<body>
  <h2>Power Series</h2>


<div class="lesson">
<p>A series is a summation: \( \sum_{n=1}^{\infty} a_n \)</p>

<p>
  A power series is a series where each term includes a power of \( x \): 
  \( \sum_{n=1}^{\infty} a_n x^n \). We say this series is 
  <strong>centered</strong> at \( x = 0 \).
</p>

<p>
  But the series \( \sum_{n=1}^{\infty} a_n (x - a)^n \) is 
  <strong>centered</strong> at \( x = a \).
</p>

<div style="display: flex; justify-content: center; align-items: flex-start; position: absolute;">
  <div id="yourTurn" class="box">
    <h3 style="padding-bottom: 0.5em;">Your Turn</h3>
    <p>Create a power series of the form \( \sum_{n=1}^{\infty} a_n (x - a)^n \)</p>
    <div id="question">
      <label id= "label-an" for="an">\(a_n=\)</label>
      <input id="an" type="text">
    </div>
    <div id="question">
    <span>\( (x - \)</span>
    <input id="center" type="text">
    <span>\()^n \)</span>
    <div id="button-space" style="width:150px; margin: 0 auto; padding-top: 10px;">
      <button id="submitPowerSeriesBtn" style="position: relative;">Submit Power Series</button>
    </div>
    </div>
  </div>
  <div id="userPlaySection">
    <div id="userGeneratedLatexSection"></div>
    <div id="generatedLatexExpressionsSection"></div>

    
  </div>
</div>
<!-- <p>But what does it even mean for the series to be <em>centered</em> <a target="_blank" href="https://www.desmos.com/calculator/gy6tkj8sjw">somewhere?</a></p>
<p>Please work through the next two Desmos links in order</p>
<a href="https://www.desmos.com/calculator/hfxi3fttky" target="_blank">Power Series: Where Does it Converge?</a><br>
<a href="https://www.desmos.com/calculator/vdjbwpn07h" target="_blank">Power Series: Visualizing Interval of Convergence</a> -->
</div>
  <script>
    let user_power_series;
    let user_an; // a_n = ...
    let user_center; // (x-a)^n
    let userGeneratedLatexSection = document.getElementById("userGeneratedLatexSection");
    let userPlaySection = document.getElementById("userPlaySection");
    let generatedLatexExpressionsSection = document.getElementById("generatedLatexExpressionsSection");
    document.getElementById("submitPowerSeriesBtn").addEventListener("click", function() {
      // TO DO: sanitize values
      // collect values
      user_an = document.getElementById("an").value;
      user_center = parseInt(document.getElementById("center").value);
      console.log("a_n: ", user_an);
      console.log("a: ", user_center);
      // return values as latex
      userGeneratedLatexSection.innerHTML = buildLatexForUserInput(user_an, user_center);

      generatedLatexExpressionsSection.innerHTML = buildLatexForGivenN(5, user_an, user_center);
      MathJax.typeset();  
    }
    )
    function buildLatexForUserInput(user_an, user_center) {
      const a = user_center === 0
      ? "x"
      : user_center > 0
        ? `(x - ${user_center})`
        : `(x + ${Math.abs(user_center)})`;
      const latex = `\\[ \\sum_{n=1}^{\\infty} ${user_an} \\cdot ${a}^n \\]`;
      return `<div>${latex}</div>`;
    }

    function buildLatexForGivenN(n,user_an, user_center) {
      let user_an_cleaned = user_an.replace(/n/g, n);
      let user_center_cleaned = `(x-${user_center})^${n}`;
     

      const latex = `\\[${user_an_cleaned} \\cdot ${user_center_cleaned} \\]`;

      return latex;
    }
    
  </script>
</body>
</html>
