<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Taylor Series: Approximation</title>
    <style>
      @font-face {
        font-family: 'TangoSans_Bold';
        src: url('tangosans/TangoSans_Bold.ttf') format('truetype');
      }

      body {
        background-color: #000;
        color: #00ccff;
        font-family: 'TangoSans_Bold', sans-serif;
        text-align: center;
        padding: 2em;
        row-gap: 2em;

      }

      p {
        margin-top: 1em;
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
        }
      }

      .purple {
        color: purple;
      }

      .yellow {
        color: yellow;
      }

      .question {
        display: flex;
        align-items: center;
        gap: 0.5em;
      }

      input[type="text"] {
        background-color: #111;
        /* dark input background */
        color: #00ccff;
        /* cyan text color */
        border: 1px solid #00ccff;
        /* cyan border */
        border-radius: 4px;
        /* rounded corners */
        padding: 10px 12px;
        font-size: 16px;
        width: 20%;
        height: 3px;
        box-shadow: 0 0 8px #00ccff33;
        /* subtle cyan glow */
        outline: none;
        transition: box-shadow 0.3s ease, border-color 0.3s ease;
      }

      input[type="text"]:focus {
        border-color: #33ffff;
        box-shadow: 0 0 12px #33ffff;
      }

    button {
      margin-top: 1em;
      padding: 12px 24px;
      font-size: 16px;
      font-weight: bold;
      color: #000;
      background-color: #00ccff;
      border: none;
      border-radius: 30px;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
      animation: fadeIn 1s forwards;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #00ccff;
      /* animation: fadeIn 1s forwards; */
    }

    button:active {
      transform: scale(0.95);
      /* animation: fadeIn 1s forwards; */
    }

    </style>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>
  <body>
    <div id="divGraph" style="height: 300px;"></div>
    <div id="divExplainApproximation" style="max-width: 400px;">
      In order to evaluate e^1.2, we can build an approximating function at a nearby point, x=0. We choose this 
      point because it is easy to work with for this specific function; e^0 = 1.
    </div>
      <div id="divDeg1" style="max-width: 400px;">
      To build an approximating function, f, of degree 1 (f(x) = c_0 + c_1x), we need:
      <ul>
        f(0) = 0
        f'(0) = d/dx(e^x)|x=0
      </ul>
    </div>
  </body>
  <script>
    function e(x) {
      return Math.exp(x)
    }
    function getRange(f) {
      return xValues.map(each => f(each));
    }
    
    function deg1(x) {
      return x + 1
    }
    function deg2(x) {
      return x**2 / 2 + x + 1
    }

    function deg3(x) {
      return x**3 / 6 + x**2 / 2 + x + 1
    }

    function showTrace(trace) {
      trace.visible = true;
    }

    function hideTrace(trace) {
      trace.visible = false;
    }
    // trace_deg1 = 
    // trace_deg2 
    // trace_deg3
    function getPointForFunction(f, label, color, pointSize, labelSize) {
      return { 
      x: [1.2],
      y: [f(1.2)],
      mode: 'markers+text',
      type: 'scatter',
      text: [label],
      textposition: 'top center',
      marker: {
        size: pointSize,
        color: color
      },
      textfont: {
        size: labelSize,
        color: color
      },
      showlegend:false
    }
    }     
    let xValues = [];
    let traces = [];
    for (let i=-2; i<=2; i+=0.1) {
        xValues.push(i);
    }


    point_e_unknown = getPointForFunction(e,'?', 'blue', 3, 12);
    point_deg1 = getPointForFunction(deg1,'D_1', 'black', 3, 3);
    point_deg2 = getPointForFunction(deg2,'D_2', 'yellow', 3, 3);
    point_deg3 = getPointForFunction(deg3,'D_3', 'green', 3, 3);



    trace_e_x = {
        x: xValues,
        y: xValues.map(each => Math.exp(each)),// how to make this e^0, e^5, etc..],
        mode:'lines',
        name: 'e^x'
    };
    trace_deg1 = {
        x: xValues,
        y: getRange(deg1),
        mode:'lines'
    };
    trace_deg2 = {
        x: xValues,
        y: getRange(deg2),
        mode:'lines'
    };
    trace_deg3 = {
        x: xValues,
        y: getRange(deg3),
        mode:'lines'
    };


    
    layout = {
        title: {text: 'e^x'}
    };
    traces.push(trace_e_x, trace_deg1, trace_deg2, trace_deg3, point_e_unknown);
   
    Plotly.newPlot('divGraph', traces, layout);
  </script>
</html>